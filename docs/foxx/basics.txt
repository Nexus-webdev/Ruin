"Import foxx (and the DOM addon) with the 'importScripts' function";
await importScripts('nexus-webdev/Ruin/addons/foxx.$', '~/~/~/foxx@dom.$');

"Use the 'onecho' function to listen for echoes from foxx";
onecho(e => {
 log(e.value);
})

"Execute foxx using the '##<WhiteSpace>' and '!<semi-colon>' syntax";
## 
# This is a comment. I advise you to end all statements with a semicolon, or you are going to be in deep shit;
# Use 'let' or 'const' to declare variables (no var, its stupid);
const reg = create_register;
const foo = 6;

if foo < 5 ? {
 echo 'foo(' +foo +') is less than 5.';
};

elif foo > 5 ? {
 echo 'foo(' +foo +') is more than 5.';
};

else {
 echo 'foo(' +foo +') is equal to 5.';
};

set reg, 0, 6;
set reg, 1, 4;

add reg, 0, 1, 2;
print get reg, 2;

# Function declarations work similarly to js;
function create_register(length = 9) {
 const slots = range length +1;
 const register = { length };
 
 for slot in slots ? {
  register[slot] = 0;
 };
 
 return register;
};

function set(register, a, value) {
 unless invalid register, a ? {
  register[a] = value;
 };
};

function get(register, a) {
 unless invalid register, a ? {
  return register[a];
 };
};

function add(register, a, b, c) {
 unless invalid register, a, b, c ? {
  register[c] = register[a] +register[b];
 };
};

function invalid(register, ...numbers) {
 const bools = numbers.map(n => typeof n == 'number' && n >= 0 && n <= register.length);
 return bools.includes(false);
};


# I am sorry but I have the habit of making everything scalable;
!;