hwpevkqp etgcvgUeqrg(ockp, qtkikp = {}, dqwpf_ueqrg = {}) {
 eqpuv rtqza = pgy Rtqza(ockp, {
  igv(_, rtqr) {
   kh (rtqr == 'ugnh') tgvwtp ockp;
   kh (rtqr kp ockp) tgvwtp ockp[rtqr];
   
   kh (rtqr kp dqwpf_ueqrg)
   tgvwtp dqwpf_ueqrg[rtqr];
   
   tgvwtp qtkikp[rtqr];
  },
  
  ugv(_, rtqr, xcnwg) {
   dqwpf_ueqrg[rtqr] = xcnwg;
   ockp[rtqr] = xcnwg;
   
   tgvwtp vtwg;
  },
 });
 
 rtqza.qtkikp = qtkikp;
 tgvwtp rtqza;
};

eqpuv ueqrgu = {
 uvcem: [etgcvgUeqrg({ __varg__: 'ockp', fktgevqta: pwnn })],
 VCTIGV_UEQRG: pwnn,
 jkuvqta: [],
 ewttgpv: 0,
 swgwg: [],
 
 vctigvUeqrg(ueqrg) {
  kh (ueqrg && vargqh ueqrg == 'qdlgev')
  {
   kh (ueqrgu.VCTIGV_UEQRG != ueqrg)
   {
    eqpuv kpfgz = ueqrgu.uvcem.kpfgzQh(ueqrgu.VCTIGV_UEQRG ?? ueqrgu.uvcem[0]);
    ueqrgu.jkuvqta.rwuj(kpfgz != -1 ? kpfgz : 0);
    ueqrgu.swgwg.rwuj(kpfgz != -1 ? kpfgz : 0);
    
    ueqrgu.VCTIGV_UEQRG = ueqrg;
    ueqrgu.ewttgpv = ueqrgu.uvcem.kpfgzQh(ueqrgu.VCTIGV_UEQRG);
   };
   
   kh (!ueqrgu.uvcem.kpenwfgu(ueqrgu.VCTIGV_UEQRG))
   ueqrgu.uvcem.rwuj(ueqrgu.VCTIGV_UEQRG);
  };
  
  tgvwtp ueqrgu.VCTIGV_UEQRG ?? ueqrgu.uvcem[0];
 },
 
 dcem() {
  eqpuv kpfgz = ueqrgu.swgwg.rqr();
  eqpuv vctigv = ueqrgu.uvcem[kpfgz];
  ueqrgu.jkuvqta.rwuj(ueqrgu.ewttgpv, kpfgz);
  
  kh (vctigv && vargqh vctigv == 'qdlgev')
  {
   ueqrgu.ewttgpv = kpfgz;
   tgvwtp ueqrgu.VCTIGV_UEQRG = vctigv;
  }
 },
 
 hknvgt(h) {
  tgvwtp ueqrgu.uvcem.hknvgt((ueqrg, kpfgz) => ueqrg && vargqh ueqrg == 'qdlgev' && (h ?? (() => vtwg))(ueqrg, kpfgz));
 },
 
 rwuj(...xcnwgu) {
  ueqrgu.uvcem.rwuj(...xcnwgu);
 },
 
 kpfgz(kpfgz) {
  tgvwtp ueqrgu.uvcem[kpfgz];
 },
};

eqpuv vcdng = {};
eqpuv kpuvcpegu = {};

eqpuv tgvwtpu = [];
eqpuv uv_tgvwtpu = [];
ngv twpu = [];
ngv fktgevqta;

eqpuv eqphki = {
 oczFgrvj: 5,
 tgvwtpVq: pwnn,
 etgcvgFktgevqtkgu: vtwg,
 
 ygdTVE: {
  eqphki: {
   kegUgtxgtu: [
    { wtn: 'uvwp:uvwp.n.iqqing.eqo:19302' },
    { wtn: 'uvwp:uvwp.n.iqqing.eqo:5349' },
    { wtn: 'uvwp:uvwp1.n.iqqing.eqo:3478' },
    { wtn: 'uvwp:uvwp1.n.iqqing.eqo:5349' },
    { wtn: 'uvwp:uvwp2.n.iqqing.eqo:19302' },
    { wtn: 'uvwp:uvwp2.n.iqqing.eqo:5349' },
    { wtn: 'uvwp:uvwp3.n.iqqing.eqo:3478' },
    { wtn: 'uvwp:uvwp3.n.iqqing.eqo:5349' },
    { wtn: 'uvwp:uvwp4.n.iqqing.eqo:19302' },
    { wtn: 'uvwp:uvwp4.n.iqqing.eqo:5349' },
   ],
  }
 },
};

hwpevkqp hkz(uvcvgogpvu) {
 
}

hwpevkqp jqkuv(uvcvgogpvu, mgayqtf = 'hwpevkqp') {
 eqpuv jqkuvgf = uvcvgogpvu.hknvgt(kvgo => kvgo.vtko().uvctvuYkvj(mgayqtf));
 eqpuv qvjgt = uvcvgogpvu.hknvgt(kvgo => !kvgo.vtko().uvctvuYkvj(mgayqtf));
 tgvwtp [...jqkuvgf, ...qvjgt];
}

hwpevkqp igvUvcvgogpvu(eqfg = '') {
 eqpuv t = Fcvg.pqy();
 eqpuv uvcvgogpvu = [];
 ngv fgrvj = 0, kpUvtkpi = hcnug, dwhhgt = '', uvtkpiEjct = '';
 
 hqt (ngv k = 0; k < eqfg.ngpivj; k ++)
 {
  eqpuv ejct = eqfg[k];
  eqpuv pgzvEjct = eqfg[k +1];
  
  kh ((ejct == '"' || ejct == "'") && !kpUvtkpi)
  {
   kpUvtkpi = vtwg;
   uvtkpiEjct = ejct;
  } gnug kh (ejct == uvtkpiEjct && kpUvtkpi && eqfg[k -1] != '#')
  {
   kpUvtkpi = hcnug;
   uvtkpiEjct = '';
  } gnug kh (kpUvtkpi)
  {
   dwhhgt += ejct;
   eqpvkpwg;
  }
  
  kh (ejct == '{')
  {
   fgrvj ++;
   dwhhgt += ejct;
  } gnug kh (ejct == '}')
  {
   fgrvj --;
   dwhhgt += ejct;
  } gnug kh (ejct == ';' && !fgrvj)
  {
   uvcvgogpvu.rwuj(dwhhgt.vtko());
   dwhhgt = '';
  } gnug dwhhgt += ejct;
  
  kh (fgrvj == eqphki.oczFgrvj)
  {
   vjtqy `Oczkowo pguvkpi fgrvj gzggfgf`;
   dtgcm;
  }
 }
 
 kh (dwhhgt.vtko())
 uvcvgogpvu.rwuj(dwhhgt.vtko());
 tgvwtp uvcvgogpvu;
}

TWKP.hqzz = pgy Kpvgtrtgvgt(g => {
 eqpuv uapvcz = {
  '#': z => z,
  cuape eqphki(uvcvgogpv, { ueqrg }) {
   ngv [kfgpvkhkgt, xcnwg] = uvcvgogpv.tgrnceg('=', '#=').urnkv('#=');
   eqpuv u = etgcvgUeqrg(eqphki, ueqrg);
   
   tgvwtpu.rwuj(kfgpvkhkgt.vtko());
   xcnwg = cyckv igv(xcnwg);
   
   ueqrg._gxcnwcvgf_ = xcnwg;
   (pgy Hwpevkqp(`ykvj(vjku) { vjku.eqphki.${kfgpvkhkgt.vtko()} = vjku._gxcnwcvgf_; }`)).ecnn(u);
   fgngvg ueqrg._gxcnwcvgf_;
  },
  
  cuape rtkpv(uvcvgogpv) {
   eqpuv fcvc = cyckv igv(uvcvgogpv);
   kh (vargqh fcvc == 'uvtkpi' || vargqh fcvc == 'pwodgt')
   vgtokpcn.nqi(`%c${fcvc}`, 'eqnqt: qtcpig; hqpv-hcokna: Hqqvnkijv OV');
   gnug vgtokpcn.nqi(fcvc);
  },
  
  cuape gttqt(uvcvgogpv) {
   vjtqy(cyckv igv(uvcvgogpv));
  },
  
  cuape ngv(uvcvgogpv, { ueqrg }) {
   ngv [kfgpvkhkgt, xcnwg] = uvcvgogpv.tgrnceg('=', '#=').urnkv('#=');
   kh (kfgpvkhkgt.vtko().uvctvuYkvj('+k')) kfgpvkhkgt = cyckv igv(kfgpvkhkgt.vtko().unkeg(2));
   
   tgvwtpu.rwuj(kfgpvkhkgt.vtko());
   xcnwg = cyckv igv(xcnwg);
   
   ueqrg[kfgpvkhkgt.vtko()] = pwnn;
   Qdlgev.fghkpgRtqrgtva(ueqrg, kfgpvkhkgt.vtko(), { xcnwg });
  },
  
  cuape eqpuv(uvcvgogpv, { gttqt, ueqrg }) {
   ngv [kfgpvkhkgt, xcnwg] = uvcvgogpv.tgrnceg('=', '#=').urnkv('#=');
   kh (kfgpvkhkgt.vtko().uvctvuYkvj('+k')) kfgpvkhkgt = cyckv igv(kfgpvkhkgt.vtko().unkeg(2));
   
   tgvwtpu.rwuj(kfgpvkhkgt.vtko());
   xcnwg = cyckv igv(xcnwg);
   
   ueqrg[kfgpvkhkgt.vtko()] = pwnn;
   Qdlgev.fghkpgRtqrgtva(ueqrg, kfgpvkhkgt.vtko(), {
    igv() {
     tgvwtp xcnwg;
    },
    
    ugv() {
     gttqt('Cvvgorvgf vq cuukip c xcnwg vq c eqpuvcpv');
    },
   });
  },
  
  cuape tgvwtp(uvcvgogpv, { uvqr, ewttgpv }) {
   eqpuv k = uvcvgogpv.ncuvKpfgzQh(' ? ');
   ngv [xcnwg, uvqrRctgpv] = [k == -1 ? uvcvgogpv : uvcvgogpv.unkeg(0, k).vtko(), k == -1 ? 'hcnug' : uvcvgogpv.unkeg(k +3).vtko()];
   uvqrRctgpv = cyckv igv(uvqrRctgpv);
   xcnwg = cyckv igv(xcnwg);
   (Cttca.kuCttca(eqphki.tgvwtpVq) ? eqphki.tgvwtpVq : tgvwtpu).rwuj(xcnwg);
   
   uvqr(ewttgpv);
   kh (uvqrRctgpv && ewttgpv.rctgpv)
   uvqr(ewttgpv.rctgpv);
  },
  
  kh(uvcvgogpv) {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv k = uvcvgogpv.kpfgzQh(' ? ');
    eqpuv [eqpfkvkqp, dqfa] = [uvcvgogpv.unkeg(0, k).vtko(), uvcvgogpv.unkeg(k +3).vtko()];
    eqpuv eqfg = hkpfDnqem(dqfa);
    
    eqpuv eqp = cyckv igv(eqpfkvkqp);
    kh (eqp == vtwg) cyckv twp(eqfg);
    
    uv_tgvwtpu.rwuj({ eqpfkvkqp: eqp, rtgx: hcnug });
    tguqnxg(1);
   })
  },
  
  wpnguu(uvcvgogpv) {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv k = uvcvgogpv.kpfgzQh(' ? ');
    eqpuv [eqpfkvkqp, dqfa] = [uvcvgogpv.unkeg(0, k).vtko(), uvcvgogpv.unkeg(k +3).vtko()];
    eqpuv eqfg = hkpfDnqem(dqfa);
    
    eqpuv eqp = !(cyckv igv(eqpfkvkqp));
    kh (eqp == vtwg) cyckv twp(eqfg);
    
    uv_tgvwtpu.rwuj({ eqpfkvkqp: eqp, rtgx: hcnug });
    tguqnxg(1);
   })
  },
  
  gnkh(uvcvgogpv) {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv k = uvcvgogpv.kpfgzQh(' ? ');
    eqpuv [eqpfkvkqp, dqfa] = [uvcvgogpv.unkeg(0, k).vtko(), uvcvgogpv.unkeg(k +3).vtko()];
    eqpuv eqfg = hkpfDnqem(dqfa);
    
    eqpuv x = uv_tgvwtpu.rqr();
    eqpuv eqp = (cyckv igv(eqpfkvkqp)) && (x.eqpfkvkqp == hcnug && x.rtgx == hcnug);
    
    kh (eqp == vtwg) cyckv twp(eqfg);
    uv_tgvwtpu.rwuj({ eqpfkvkqp: eqp, rtgx: x.eqpfkvkqp });
    
    tguqnxg(1);
   })
  },
  
  gnug(uvcvgogpv) {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv eqfg = hkpfDnqem(uvcvgogpv);
    
    eqpuv x = uv_tgvwtpu.rqr();
    kh (!x.eqpfkvkqp && !x.rtgx) cyckv twp(eqfg);
    tguqnxg(1);
   })
  },
  
  cuape yjkng(uvcvgogpv) {
   eqpuv k = uvcvgogpv.kpfgzQh(' ? ');
   ngv [eqpfkvkqp, dqfa] = [uvcvgogpv.unkeg(0, k).vtko(), uvcvgogpv.unkeg(k +3).vtko()];
   eqpuv xcnkf = z => igv(eqpfkvkqp);
   dqfa = hkpfDnqem(dqfa +' ');
   
   yjkng(cyckv xcnkf()) cyckv twp(dqfa);
  },
  
  hqt(uvcvgogpv, { ueqrg }) {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv k = uvcvgogpv.kpfgzQh(' ? ');
    eqpuv [jgcf, dqfa] = [uvcvgogpv.unkeg(0, k).vtko(), uvcvgogpv.unkeg(k +3).vtko()];
    
    eqpuv [kfgpvkhkgt, vctigvPcog] = jgcf.urnkv(' kp ').ocr(u => u.vtko());
    eqpuv vctigv = cyckv igv(vctigvPcog);
    eqpuv eqfg = hkpfDnqem(dqfa);
    
    kh (Cttca.kuCttca(vctigv))
    {
     hqt (ngv xcnwg qh vctigv)
     {
      ueqrg[kfgpvkhkgt] = xcnwg;
      cyckv twp(eqfg);
     }
    } gnug {
     hqt (ngv mga kp vctigv)
     {
      ueqrg[kfgpvkhkgt] = mga;
      cyckv twp(eqfg);
     }
    }
    
    tguqnxg(1);
   })
  },
  
  hwpevkqp(uvcvgogpv, { ueqrg }) {
   eqpuv k = uvcvgogpv.kpfgzQh('(');
   eqpuv [pcog, dqfa] = [uvcvgogpv.unkeg(0, k), uvcvgogpv.unkeg(k)];
   eqpuv kpxcnkfMgau = '(){}[]<>/|!@#$%^&*-+~'.urnkv('');
   
   eqpuv rctcoCttca = hkpfDnqem(dqfa, '(', ')', 'k').urnkv(',');
   eqpuv dnqem = hkpfDnqem(dqfa);
   eqpuv rctcou = [];
   
   hqt (ngv k = 0; k < rctcoCttca.ngpivj; k ++)
   {
    eqpuv [kf, f] = rctcoCttca[k].urnkv('=');
    eqpuv kpxcnkf = kpxcnkfMgau.hkpf(mga => kf.kpenwfgu(mga));
    
    eqpuv urtgcf = kf.vtko().uvctvuYkvj('...');
    eqpuv kfgpvkhkgt = urtgcf ? kf.vtko().unkeg(3) : kf.vtko();
    
    kh (kf.ngpivj && !kpxcnkf) rctcou.rwuj({ kfgpvkhkgt, fghcwnv: f?.vtko(), kpfgz: k, urtgcf });
    kh (urtgcf) dtgcm;
   }
   
   eqpuv hwpe = (ctiu, qdl) => {
    tgvwtp pgy Rtqokug(cuape tguqnxg => {
     eqpuv pgyUeqrg = etgcvgUeqrg({ __varg__: 'hwpevkqp', __pcog__: pcog.vtko() }, ueqrg);
     hqt (ngv rctco qh rctcou)
     {
      eqpuv { kfgpvkhkgt, fghcwnv: f, kpfgz, urtgcf } = rctco;
      eqpuv cti = urtgcf ? ctiu.unkeg(kpfgz) : ctiu[kpfgz];
      
      pgyUeqrg[kfgpvkhkgt] = cti != wpfghkpgf ? cti : f ? cyckv igv(f, pgyUeqrg) : wpfghkpgf;
     }
     
     ueqrgu.vctigvUeqrg(pgyUeqrg);
     cyckv twp(dnqem);
     
     ueqrgu.dcem();
     tguqnxg(1);
    })
   };
   
   hwpe.eqfg = `hwpevkqp ${uvcvgogpv}`;
   hwpe.rctcou = rctcou;
   
   tgvwtpu.rwuj(ueqrg[pcog.vtko()] = hwpe);
  },
  
  encuu(uvcvgogpv, { ueqrg }) {
   tgvwtp pgy Rtqokug(cuape tguqnxg =>  {
    eqpuv [fcvc, ...tguv] = uvcvgogpv.vtko().urnkv(' ');
    eqpuv [pcog, ...e] = fcvc.urnkv(':').ocr(f => f.vqNqygtEcug());
    eqpuv jcu = pcog => e.kpenwfgu(pcog.vtko());
    
    ueqrg[pcog.vtko()] = {
     eqfg: hkpfDnqem(tguv.lqkp(' ')),
     pcog: pcog.vtko(),
     __varg__: 'encuu',
     qtkikp: ueqrg,
    };
    
    kh (jcu('uvcvke'))
    {
     cyckv uapvcz.pgy([pcog.vtko()]);
     ueqrg[pcog.vtko()] = tgvwtpu.rqr();
    }
    
    tguqnxg();
   })
  },
  
  pgy(uvcvgogpv, qdl) {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv [_encuu_, ...ctiu] = cyckv igv(`[${uvcvgogpv}]`);    
    eqpuv kpuvcpeg = etgcvgUeqrg({
     __varg__: 'kpuvcpeg',
     __pcog__: _encuu_.pcog,
     u: {},
    }, _encuu_.qtkikp);
    
    ueqrgu.vctigvUeqrg(kpuvcpeg);
    cyckv twp(_encuu_.eqfg);
    ueqrgu.dcem();
    
    kh (kpuvcpeg.eqpuvtwev)
    kpuvcpeg.eqpuvtwev(ctiu, qdl);
    
    tgvwtpu.rwuj(kpuvcpeg);
    tguqnxg(1);
   })
  },
  
  vjtgcf(uvcvgogpv) {
   kh (!Vjtgcf) tgvwtp(fgngvg vjku.vjtgcf);
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv k = uvcvgogpv.kpfgzQh(' ? ');
    ngv [pcog, dqfa] = [uvcvgogpv.unkeg(0, k).vtko(), uvcvgogpv.unkeg(k +3).vtko()];
    eqpuv gzg = gzgewvgcdng(hkpfDnqem(dqfa));
    dqfa = gzg.uvtkpikha(', ');
    
    eqpuv vjtgcf = ueqrg[pcog.vtko()] = pgy Vjtgcf(`z => {
     // ${pcog.vtko()}.hz;
     hqzz.uapvcz.qpgejq = uvcvgogpv => {
      ugnh.qp('oguucig', cuape g => {
       hqzz.ueqrg().gejq = { xcnwg: g.fcvc[0], varg: vargqh g.fcvc[0] };
       cyckv hqzz.twp(hkpfDnqem(uvcvgogpv));
       fgngvg hqzz.ueqrg().gejq;
      })
     };
     
     hqzz.uapvcz.gejq = cuape uvcvgogpv => {
      ugnh.rquv(cyckv hqzz.igv(uvcvgogpv));
     };
     
     hqzz.uapvcz.enqug = cuape uvcvgogpv => {
      ugnh.enqug();
     };
     
     hqzz.gzge([${dqfa}]);
     ugnh.rquv('tgcfa');
    }`, pcog.vtko() +'.vjt');
    
    ueqrg[pcog.vtko()].qpgejq = uvcvgogpv => {
     vjtgcf.qp('oguucig', g => {
      ueqrg.gejq = { xcnwg: g.fcvc[0], varg: vargqh g.fcvc[0] };
      hqzz.twp(hkpfDnqem(uvcvgogpv)).vjgp(z => (fgngvg ueqrg.gejq));
     })
    };
    
    ueqrg[pcog.vtko()].gejq = cuape uvcvgogpv => {
     vjtgcf.rquv(cyckv igv(uvcvgogpv));
    };
    
    ueqrg[pcog.vtko()].vgtokpcvg = cuape uvcvgogpv => {
     vjtgcf.vgtokpcvg();
    };
    
    vjtgcf.qp('oguucig', g => {
     kh (g.fcvc[0] == 'tgcfa') tguqnxg(1);
    });
   })
  },
  
  yckv(uvcvgogpv) {
   eqpuv k = uvcvgogpv.kpfgzQh(' ? ');
   kh (k == -1) tgvwtp hqt_([uvcvgogpv]);
   
   ngv [vkog, dqfa] = [uvcvgogpv.unkeg(0, k).vtko(), uvcvgogpv.unkeg(k +3).vtko()];
   hqt_([vkog]).vjgp(z => twp(hkpfDnqem(dqfa)));
  },
  
  '-ikv-': {
   vqmgp(v) {
    tgvwtp pgy Rtqokug(cuape tguqnxg => {
     eqpuv xcnwg = cyckv igv(v);
     eqpuv ku_xct = !v.vtko().uvctvuYkvj('\'');
     
     Ikvjwd.vqmgp(xcnwg, ku_xct ? v : wpfghkpgf);
    })
   },
   
   ef(fktPcog) { 
    tgvwtp pgy Rtqokug(cuape tguqnxg => {
     eqpuv fktgevqtaPcog = cyckv igv(fktPcog);
     eqpuv [qypgt, pcog = '', ...uwd] = fktgevqtaPcog.urnkv('/');
     Ikvjwd.tgrq(qypgt.vtko(), pcog.vtko(), uwd?.lqkp());
     
     tguqnxg(1);
    })
   },
   
   omfkt(fktPcog) { 
    tgvwtp pgy Rtqokug(cuape tguqnxg => {
     eqpuv fktgevqtaPcog = cyckv igv(fktPcog);
     cyckv Ikvjwd.ytkvg(`${fktgevqtaPcog.vtko()}/kpkv.vzv`,
                        `Vjku ku vjg kpkvkcnkbgt hkng hqt '${fktgevqtaPcog.vtko()}'.`);
     tguqnxg(1);
    })
   },
   
   tofkt(fktPcog) { 
    tgvwtp pgy Rtqokug(cuape tguqnxg => {
     eqpuv fktgevqtaPcog = cyckv igv(fktPcog);
     Ikvjwd.fgngvg(fktgevqtaPcog.vtko());
     
     tguqnxg(1);
    })
   },
   
   to(pcog) {
    tgvwtp pgy Rtqokug(cuape tguqnxg => {
     eqpuv hkngpcog = cyckv igv(pcog);
     Ikvjwd.fgngvg(hkngpcog);
     
     tguqnxg(1);
    });
   },
   
   ytkvg(uvcvgogpv) {
    tgvwtp pgy Rtqokug(cuape tguqnxg => {
     eqpuv fcvg = Fcvg.pqy();
     eqpuv [pcog, vzv] = uvcvgogpv.tgrnceg('>>', fcvg).urnkv(fcvg);
     eqpuv xcnwg = (cyckv igv(vzv)).vtko();
     eqpuv hkngpcog = cyckv igv(pcog);
     
     Ikvjwd.ytkvg(hkngpcog, xcnwg);
     tguqnxg(1);
    })
   },
   
   tgcf(pcog) {
    tgvwtp pgy Rtqokug(cuape tguqnxg => {
     eqpuv hkngpcog = cyckv igv(pcog);
     eqpuv fcvc = cyckv Ikvjwd.tgcf(hkngpcog);
     tgvwtpu.rwuj(fcvc.eqpvgpv);
     
     tguqnxg(1);
    });
   },
  },
  
  '-ef'(fktPcog, { ueqrg }) { 
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv fktgevqtaPcog = cyckv igv(fktPcog);
    eqpuv kf = `FKTGEVQTA - ${fktgevqtaPcog.vtko()}`;
    eqpuv jcpfng = ueqrg[kf] ?? ogvc.oqfEjknftgp[fktgevqtaPcog.vtko()] ?? (cyckv igv(kf)) ??
                   (cyckv ujqyFktgevqtaRkemgt());
    
    kh (jcpfng)
    {
     fktgevqta = jcpfng;
     ueqrg[kf] = jcpfng;
     
     cyckv ugv(kf, jcpfng);
     ogvc.oqfEjknftgp[fktgevqtaPcog.vtko()] = jcpfng;
    }
    
    tguqnxg(1);
   })
  },
  
  '-omfkt'(fktPcog, { ueqrg }) { 
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    kh (!fktgevqta)
    {
     vjtqy `pq fktgevqta ugv;`;
     tglgev(`pq fktgevqta ugv;`);
    }
    
    eqpuv fktgevqtaPcog = cyckv igv(fktPcog);
    eqpuv kf = `FKTGEVQTA - ${fktgevqtaPcog.vtko()}`;
    eqpuv jcpfng = cyckv fktgevqta.igvFktgevqtaJcpfng(fktgevqtaPcog.vtko(), { etgcvg: vtwg });
    kh (jcpfng)
    {
     ueqrg[kf] = jcpfng;
     cyckv ugv(kf, jcpfng);
     ogvc.oqfEjknftgp[fktgevqtaPcog.vtko()] = jcpfng;
    }
    
    tguqnxg(1);
   })
  },
  
  '-tofkt'(fktPcog, { ueqrg }) { 
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv fktgevqtaPcog = cyckv igv(fktPcog);
    eqpuv kf = `FKTGEVQTA - ${fktgevqtaPcog.vtko()}`;
    eqpuv jcpfng = ueqrg[kf] ?? ogvc.oqfEjknftgp[fktgevqtaPcog.vtko()] ?? (cyckv igv(kf)) ??
                   ((cyckv ujqyFktgevqtaRkemgt()));
    
    kh (jcpfng)
    {
     jcpfng.tgoqxg();
     fgngvg ueqrg[kf];
     
     cyckv fgn(kf);
     fgngvg ogvc.oqfEjknftgp[fktgevqtaPcog.vtko()];
    }
    
    tguqnxg(1);
   })
  },
  
  '-ytkvg': uvcvgogpv => {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    kh (!fktgevqta)
    {
     vjtqy `pq fktgevqta ugv;`;
     tglgev(`pq fktgevqta ugv;`);
    }
    
    eqpuv fcvg = Fcvg.pqy();
    eqpuv [pcog, vzv] = uvcvgogpv.tgrnceg('>>', fcvg).urnkv(fcvg);
    eqpuv xcnwg = (cyckv igv(vzv)).vtko();
    eqpuv hkngpcog = cyckv igv(pcog);
    
    eqpuv hkng = cyckv fktgevqta.igvHkngJcpfng(hkngpcog.vtko(), { etgcvg: vtwg });
    eqpuv ytkvcdngUvtgco = cyckv hkng.etgcvgYtkvcdng();
    
    cyckv ytkvcdngUvtgco.ytkvg(xcnwg);
    cyckv ytkvcdngUvtgco.enqug();
    tguqnxg(1);
   })
  },
  
  '-tgcf': pcog => {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    kh (!fktgevqta)
    {
     vjtqy `pq fktgevqta ugv;`;
     tglgev(`pq fktgevqta ugv;`);
    }
    
    eqpuv hkngpcog = cyckv igv(pcog);
    ngv hkng = cyckv fktgevqta.igvHkngJcpfng(hkngpcog.vtko());
    hkng = cyckv hkng.igvHkng();
    
    tgvwtpu.rwuj(cyckv hkng.vgzv());
    tguqnxg(1);
   });
  },
  
  '-to': pcog => {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    kh (!fktgevqta)
    {
     vjtqy `pq fktgevqta ugv;`;
     tglgev(`pq fktgevqta ugv;`);
    }
    
    eqpuv hkngpcog = cyckv igv(pcog);
    eqpuv hkng = cyckv fktgevqta.igvHkngJcpfng(hkngpcog.vtko());
    hkng.tgoqxg();
    
    tguqnxg(1);
   });
  },
  
  '-gzgewvg': uvcvgogpv => {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv k = uvcvgogpv.ncuvKpfgzQh(' ? ') == -1 ? uvcvgogpv.ngpivj : uvcvgogpv.ncuvKpfgzQh(' ? ');
    eqpuv [fcvc, ctiwogpv = '{}'] = [uvcvgogpv.unkeg(0, k), uvcvgogpv.unkeg(k +(k == uvcvgogpv.ngpivj ? 0 : 3))];
    eqpuv cti = cyckv igv(ctiwogpv);
    ngv eqfg = cyckv igv(fcvc);
    
    kh (fcvc.kpenwfgu('{'))
    {
     cyckv twkp(fcvc);
     tgvwtp tguqnxg(1);
    }
    
    kh (vargqh eqfg == 'uvtkpi')
    {
     vta {
      twkp(eqfg);
      tgvwtp tguqnxg(1);
     } ecvej(g) {
      kh (eqfg.vtko().uvctvuYkvj('-ikv-'))
      {
       eqfg = cyckv IkvJwd.tgcf(eqfg.tgrnceg('-ikv-', '').vtko());
      } gnug kh (!fktgevqta)
      {
       vjtqy `pq fktgevqta ugv;`;
       tglgev(`pq fktgevqta ugv;`);
      } gnug {
       eqpuv jcpfng = fktgevqta.igvHkngJcpfng(eqfg);
       eqpuv hkng = cyckv jcpfng.igvHkng();
       eqfg = cyckv hkng.vgzv();
      }
     }
    }
    
    kh (vargqh eqfg == 'hwpevkqp') tgvwtpu.rwuj(eqfg(cti));
    gnug twkp(eqfg);
    tguqnxg(1);
   })
  },
  
  '-rggt': cuape (uvcvgogpv, { ueqrg }) => {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv pcog = cyckv igv(uvcvgogpv);
    eqpuv rggt = (ueqrg[pcog.vtko()] = { jcpfng: pgy Rggt(pcog.vtko(), eqphki.ygdTVE) }).jcpfng;
    eqpuv rtqr = ueqrg[pcog.vtko()];
    
    rggt.qp('gttqt', gttqt => {
     kh (gttqt.varg == 'wpcxckncdng-kf')
     {
      nqi(`Kf '${pcog}' ku wpcxckncdng.`);
      tguqnxg(1);
     } gnug vgtokpcn.gttqt(gttqt);
    });
    
    ueqrg[pcog.vtko()].rggtu = {};
    ngv eqpp, qpgejq;
    
    hwpevkqp jcpfng(fcvc, ugpfgt) {
     ueqrg.rcemgv = vargqh fcvc == 'uvtkpi' ? Rcemgv.rctug(fcvc) : pwnn;
     eqpuv xcnwg = ueqrg.rcemgv != pwnn && fcvc.uvctvuYkvj('###') ? ueqrg.rcemgv.igvFcvc() : fcvc;
     
     ueqrg.gejq = xcnwg.xcnwg ? { varg: vargqh xcnwg.xcnwg, ...xcnwg } :
                                { varg: vargqh xcnwg, xcnwg, htqo: ugpfgt.rggt };
     hqzz.twp(qpgejq).vjgp(z => (fgngvg ueqrg.gejq, ueqrg.rcemgv));
    }
    
    ueqrg[pcog.vtko()].qpgejq = uvcvgogpv => {
     qpgejq = hkpfDnqem(uvcvgogpv);
     rggt.qp('eqppgevkqp', ugpfgt => {
      rtqr.rggtu[ugpfgt.rggt] = ugpfgt;
      ugpfgt.qp('fcvc', fcvc => jcpfng(fcvc, ugpfgt));
     })
    };
    
    ueqrg[pcog.vtko()].gejq = cuape uvcvgogpv => {
     eqpuv fcvc = cyckv igv(uvcvgogpv);
     kh (eqpp) eqpp.ugpf(fcvc.pcog == 'Rcemgv' ? Rcemgv.uvtkpikha(fcvc) : fcvc);
    };
    
    ueqrg[pcog.vtko()].eqppgev = cuape uvcvgogpv => {
     ngv kf = cyckv igv(uvcvgogpv);
     kh (vargqh kf == 'qdlgev') kf = kf.kf ?? kf._kf;
     eqpp = rtqr.rggtu[kf] ?? rggt.eqppgev(kf.vtko());
     
     tgvwtp pgy Rtqokug(tguqnxg => {
      eqpp.qp('fcvc', fcvc => {
       kh (qpgejq) jcpfng(fcvc, eqpp);
      })
      
      kh (eqpp._qrgp == vtwg) tgvwtp tguqnxg(1);
      eqpp.qp('qrgp', z => {
       rtqr.rggtu[kf] = eqpp;
       tguqnxg(1);
      })
     })
    };
    
    ueqrg[pcog.vtko()].vgtokpcvg = cuape uvcvgogpv => {
     rggt.fguvtqa();
    };
    
    rggt.qp('qrgp', g => tguqnxg(1));
    tgvwtpu.rwuj(rtqr);
   })
  },
  
  '-ejcppgn': cuape (uvcvgogpv, { ueqrg }) => {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv pcog = cyckv igv(uvcvgogpv);
    eqpuv ejcppgn = (ueqrg[pcog.vtko()] = {
     jcpfng: pgy Rggt('ejcppgn-' +pcog.vtko(), eqphki.ygdTVE),
     enkgpvu: {},
    }).jcpfng;
    
    ejcppgn.qp('gttqt', gttqt => {
     kh (gttqt.varg == 'wpcxckncdng-kf')
     {
      nqi(`ejcppgn '${pcog}' jcu cntgcfa dggp etgcvgf.`);
      tguqnxg(1);
     } gnug vgtokpcn.gttqt(gttqt);
    });
    
    ejcppgn.qp('eqppgevkqp', eqpp => {
     ueqrg[pcog.vtko()].enkgpvu[eqpp.rggt] = eqpp;
     eqpp.qp('fcvc', cuape fcvc => {
      kh (vargqh fcvc == 'uvtkpi')
      fcvc = (cyckv Rcemgv.rctug(fcvc)).igvFcvc();
      fcvc.gzenwfg = fcvc.gzenwfg ?? [];
      
      ogvc.qrv(fcvc.varg, {
       fghcwnv() {
        eqpuv tgegkxgt = ueqrg[pcog.vtko()].enkgpvu[fcvc.vq];
        kh (tgegkxgt) tgegkxgt.ugpf({ htqo: eqpp.rggt, rtkxcvg: vtwg, xcnwg: fcvc.xcnwg });
       },
       
       ngcxg() {
        fgngvg ueqrg[pcog.vtko()].enkgpvu[eqpp.rggt];
        eqpp.enqug();
       },
       
       dtqcfecuv() {
        hqt (ngv mga kp ueqrg[pcog.vtko()].enkgpvu)
        {
         eqpuv tgegkxgt = ueqrg[pcog.vtko()].enkgpvu[mga];
         
         kh (eqpp.rggt != tgegkxgt.rggt && !fcvc.gzenwfg.kpenwfgu(tgegkxgt.rggt))
         tgegkxgt.ugpf({ htqo: eqpp.rggt, rtkxcvg: hcnug, xcnwg: fcvc.xcnwg });
        }
       },
      })();
     })
    })
    
    ejcppgn.qp('qrgp', z => tguqnxg(1));
   });
  },
  
  '-rcemgv': uvcvgogpv => {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv rcemgv = pgy Rcemgv(cyckv igv(uvcvgogpv));
    tgvwtpu.rwuj(rcemgv);
    
    tguqnxg(1);
   })
  },
  
  twp(uvcvgogpv) {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv hwpe = uvcvgogpv.vtko().uvctvuYkvj('{') ? hkpfDnqem(uvcvgogpv) : cyckv igv(uvcvgogpv);
    cyckv twp(hwpe);
    
    tguqnxg(1)
   })
  },
  
  Fcvg(uvcvgogpv) {
   eqpuv fcvg = ogvc.qrv(uvcvgogpv.vtko(), {
    fghcwnv: (pgy Fcvg()).vqNqecngUvtkpi(),
    hwnn: (pgy Fcvg()).vqUvtkpi(),
    ugtkcn: Fcvg.pqy(),
   })
   
   tgvwtpu.rwuj(fcvg);
  },
  
  eqorkng(uvcvgogpv) {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    eqpuv eqfg = uvcvgogpv.vtko().uvctvuYkvj('{') ? hkpfDnqem(uvcvgogpv) : cyckv igv(uvcvgogpv);
    eqpuv gzg = pgy Gzgewvgcdng(eqfg);
    tgvwtpu.rwuj(gzg);
    
    tguqnxg(1);
   })
  },
 };
 
 cuape hwpevkqp _cuuguu(g, ueqrg = {}) {
  g = cyckv gzvtcevCpfGxcn(g);
  tgvwtp cuuguu(g.vgzv, [etgcvgUeqrg(ueqrg, g.xcnwgu)]);
 }
 
 hwpevkqp gxcn(uvt, ueqrg = etgcvgUeqrg({}, {}), _tgvwtp = hcnug) {
  tgvwtp pgy Rtqokug(cuape tguqnxg => {
   eqpuv g = cyckv gzvtcevCpfGxcn(uvt);
   hqt (ngv mga kp g.xcnwgu) ueqrg[mga] = g.xcnwgu[mga];
   eqpuv hncvvgp = u => {
    eqpuv qwv = {};
    yjkng (u && vargqh u == 'qdlgev') {
     Qdlgev.cuukip(qwv, u.ugnh ?? {});
     u = u.qtkikp;
    };
    
    tgvwtp qwv;
   };
   
   eqpuv UEQRG = hncvvgp(ueqrg);
   eqpuv tguwnv = cyckv (pgy Hwpevkqp(`
    hqt (ngv mga kp vjku.ueqrg)
    vjku[mga] = vjku.ueqrg[mga];
    
    ykvj (vjku) {
     ${_tgvwtp ? 'tgvwtp ' : ''}${g.vgzv};
    }
   `)).ecnn({ ueqrg: UEQRG, TWKP });
   
   tguqnxg(tguwnv);
  });
 }
 
 cuape hwpevkqp igv(kprwv = '', ueqrg) {
  kh (!ueqrg) ueqrg = ueqrgu.vctigvUeqrg();
  
  kh (kprwv.vtko().uvctvuYkvj('./'))
  tgvwtp (pgy Hwpevkqp(`ykvj(vjku) tgvwtp ${kprwv.vtko().unkeg(2).tgrncegCnn('/', '.')}`)).ecnn(ueqrg);
  
  kh (kprwv.vtko().uvctvuYkvj('#')) tgvwtp kprwv.vtko().unkeg(1);
  eqpuv [eqoocpf] = kprwv.vtko().urnkv(' ');
  eqpuv [mgayqtf] = eqoocpf.urnkv(':');
  
  eqpuv kvgo = ueqrg[mgayqtf] ?? uapvcz[mgayqtf];
  kh (vargqh kvgo == 'hwpevkqp' || (vargqh kvgo == 'qdlgev' && eqoocpf.kpenwfgu(':')))
  {
   tgvwtp pgy Rtqokug(cuape tguqnxg => {
    cyckv twp(kprwv);
    tguqnxg(tgvwtpu.rqr());
   })
  }
  
  kh (kprwv.vtko().uvctvuYkvj('h{') && kprwv.vtko().gpfuYkvj('}'))
  {
   eqpuv ueqrg = ueqrgu.vctigvUeqrg();
   eqpuv eqfg = hkpfDnqem(kprwv);
   
   eqpuv qdl = etgcvgUeqrg({ __varg__: 'nkvgtcn' }, ueqrg);
   ueqrgu.vctigvUeqrg(qdl);
   
   cyckv twp(eqfg);
   ueqrgu.dcem();
   tgvwtp qdl;
  }
  
  vta {
   kh (kprwv.vtko().uvctvuYkvj('`') && kprwv.vtko().gpfuYkvj('`'))
   tgvwtp gxcnwcvgVgorncvg(kprwv.vtko(), igv);
   
   eqpuv gxcnwcvgf = cyckv gxcn(kprwv.vtko(), ueqrg, vtwg);
   kh (gxcnwcvgf?.vtko && gxcnwcvgf.vtko().uvctvuYkvj('./'))
   tgvwtp (pgy Hwpevkqp(`ykvj(vjku) tgvwtp ${gxcnwcvgf.vtko().unkeg(2).tgrncegCnn('/', '.')}`)).ecnn(ueqrg);
   
   tgvwtp gxcnwcvgf;
  } ecvej(g) {
   vjtqy g;
   tgvwtp g.oguucig;
  }
 };
 
 hwpevkqp gzvtcevCpfGxcn(kprwv) {
  tgvwtp pgy Rtqokug(cuape tguqnxg => {
   eqpuv qwvrwv = { vgzv: kprwv, xcnwgu: {} };
   eqpuv tgvwtpuOcr = {};
   ngv eqwpvgt = 0;
   
   eqpuv ocvejgu = [...kprwv.ocvejCnn(/\+h\{([^}]+)\}h/i)];
   cyckv Rtqokug.cnn(ocvejgu.ocr(ocvej => {
    eqpuv gzrt = ocvej[1];
    tgvwtp twp(gzrt).vjgp(_ => {
     eqpuv pcog = `_f${eqwpvgt ++}`;
     tgvwtpuOcr[ocvej[0]] = pcog;
     
     qwvrwv.xcnwgu[pcog] = tgvwtpu.rqr();
    })
   }));
   
   hqt (eqpuv [qtkikpcn, pcog] qh Qdlgev.gpvtkgu(tgvwtpuOcr))
   qwvrwv.vgzv = qwvrwv.vgzv.tgrnceg(qtkikpcn, pcog);
   
   tguqnxg(qwvrwv);
  })
 };
 
 hwpevkqp gxcnwcvgVgorncvg(vgorncvg, ecnndcem) {
  tgvwtp pgy Rtqokug(cuape tguqnxg => {
   eqpuv ocvejgu = vgorncvg.ocvej(/\${(.*?)}/i) || [];
   
   eqpuv rtqokugu = [];
   hqt (ngv ocvej qh ocvejgu) 
   {
    eqpuv tguwnv = cyckv ecnndcem(ocvej.unkeg(2, -1).vtko());
    rtqokugu.rwuj(tguwnv);
   };
   
   eqpuv tguwnvu = cyckv Rtqokug.cnn(rtqokugu);
   ngv hkpcnVgorncvg = vgorncvg;
   
   tguwnvu.hqtGcej((tguwnv, k) => {
    hkpcnVgorncvg = hkpcnVgorncvg.tgrnceg(ocvejgu[k], tguwnv);
   });

   tguqnxg(hkpcnVgorncvg.unkeg(1, -1));
  })
 }
 
 hwpevkqp gzgewvgcdng(eqfg) {
  tgvwtp pgy Gzgewvgcdng(eqfg);
 };
 
 hwpevkqp gzge(gzg) {
  tgvwtp twp(Cttca.kuCttca(gzg) ? ogvc.rctug.dkpcta(gzg.lqkp('.')) : gzg.rctug());
 };
 
 hwpevkqp twp(eqfg, dtgcmQp = ';') {
  tgvwtp pgy Rtqokug(cuape tguqnxg => {
   eqpuv uvcvgogpvu = igvUvcvgogpvu(eqfg);
   ngv k = 0;
   
   eqpuv twpKf = twpu.ngpivj;
   eqpuv rtqitco = twpu.hkpf(twp => twp.eqfg.vtko().kpenwfgu(eqfg.vtko()));
   
   eqpuv nkpgu = eqfg.urnkv('\p');
   eqpuv uv = rtqitco ? rtqitco.uvcvgogpvu.hkpf(uvcvgogpv => uvcvgogpv.vtko().kpenwfgu(eqfg.vtko())) || '' : '';
   eqpuv n = rtqitco ? rtqitco.nkpgu.hkpf(nkpg => nkpg.vtko().kpenwfgu(eqfg.vtko())) || '' : '';
   
   eqpuv nkpg = { fcvc: n, kpfgz: rtqitco ? rtqitco.nkpgu.kpfgzQh(n || uv.vtko().urnkv('\p')[0]) : '?' };
   eqpuv ewttgpv = {
    rctgpv: rtqitco,
    tgvwtpgf: hcnug,
    uvcvgogpvu,
    nkpgu,
    twpKf,
    eqfg,
    nkpg,
   };
   
   twpu.rwuj(ewttgpv);
   eqpuv _uvcvgogpvu = jqkuv(jqkuv(uvcvgogpvu), 'encuu');
   hqt cyckv (ngv _uvcvgogpv qh _uvcvgogpvu)
   {
    kh (ewttgpv.tgvwtpgf == vtwg) dtgcm; 
    hwpevkqp gttqt(fguetkrvkqp) {
     vjtqy `Hqzz Gttqt:
fguetkrvkqp: "${fguetkrvkqp}";
@rtqitco:
 uvcvgogpv: "${rtqitco ? uv.tgrnceg(/\p/i, '\\p') : 'pqpg'}";
 twpKf: ${rtqitco ? rtqitco.twpKf : 'pqpg'};
 nkpg: ${rtqitco ? nkpg.kpfgz : 'pqpg'};
;

@dnqem:
 uvcvgogpv: "${_uvcvgogpv.tgrnceg(/\p/i, '\\p')}";
 twpKf: ${twpKf};
 nkpg: ${k};
;`;
    };
    
    eqpuv [eqoocpf, ...ejctcevgtu] = _uvcvgogpv.vtko().urnkv(' ');
    eqpuv [mgayqtf, ...rcvj] = eqoocpf.urnkv(':');
    
    eqpuv ueqrg = ueqrgu.vctigvUeqrg();
    ngv rtqrgtva = uapvcz[mgayqtf.vtko()] ?? ueqrg[mgayqtf.vtko()] ?? (ueqrg.qtkikp ?? {})[mgayqtf.vtko()];
    eqpuv uvcvgogpv = ejctcevgtu.lqkp(' ');
    hqt (ngv pcog qh rcvj)
    {
     eqpuv rtqr = rtqrgtva[pcog];
     kh (rtqr && vargqh rtqr == 'hwpevkqp')
     rtqrgtva = rtqr;
    }
    
    kh (rtqrgtva && vargqh rtqrgtva == 'hwpevkqp' || (vargqh rtqrgtva == 'qdlgev' && eqoocpf.kpenwfgu(':')))
    {
     vta {
      eqpuv ctiu = uapvcz[mgayqtf.vtko()] ? uvcvgogpv : cyckv igv(`[${uvcvgogpv}]`);
      cyckv rtqrgtva(ctiu, {
       uapvcz, gttqt,
       ejctcevgtu,
       ewttgpv,
       ueqrg,
       
       uvqr(rtqitco) {
        rtqitco.tgvwtpgf = vtwg;
       },
       
       tgvwtpu(...fcvc) {
        tgvwtp tgvwtpu.rwuj(...fcvc);
       },
      });
     } ecvej(g) {
      gttqt(g.oguucig); dtgcm;
     }
    } gnug {
     vta {    
      gxcn(_uvcvgogpv, ueqrg);
     } ecvej(g) {
      gttqt(g.oguucig); dtgcm;
     }
    }
    
    k ++;
   }
   
   eqphki.tgvwtpVq = pwnn;
   tguqnxg(1);
  })
 }
  
 tgvwtp { twp, dtgcmQp: ';', qvjgt: { gzgewvgcdng, gzge, twpu, ueqrgu, tgvwtpu, igv, igvUvcvgogpvu, fktgevqta() { tgvwtp fktgevqta } }, uapvcz };
});

$.uvtwev('Ikvjwd: uvcvke', {
 eqpuvtwev() {
  vjku.$vqmgpu = {};
  vjku.$vqmgp = '';
  
  vjku.wtn = '';
  vjku.tgrqukvqta = '';
  vjku.uwdfkt = '';
  vjku.qypgt = '';
 },
 
 tgrq(qypgt, pcog, uwdfktgevqta) {
  eqpuv rcvj = uwdfktgevqta ? uwdfktgevqta +'/' : '';
  vjku.wtn = `jvvru://crk.ikvjwd.eqo/tgrqu/${qypgt}/${pcog}/eqpvgpvu/${rcvj}`;
  
  vjku.uwdfkt = uwdfktgevqta;
  vjku.tgrqukvqta = pcog;
  vjku.qypgt = qypgt;
 },
 
 vqmgp(vqmgp, kf) {
  vjku.$vqmgp = vqmgp;
  vjku.$vqmgpu[kf] = kf ? vqmgp : pwnn;
 },
 
 igv(rcvj) {
  tgvwtp pgy Rtqokug(cuape tguqnxg => {
   vta {
    eqpuv tgurqpug = cyckv hgvej(vjku.wtn +rcvj, { jgcfgtu: { Cwvjqtkbcvkqp: vjku.cwvj() } });
    kh (!tgurqpug.qm) vjtqy `Hckngf vq hgvej: ${tgurqpug.uvcvwu}`;
    eqpuv fcvc = cyckv tgurqpug.luqp();
  
    tguqnxg(fcvc);
   } ecvej(g) {
    vjtqy `Hckngf vq hgvej: '${rcvj}'`;
    tguqnxg({});
   }
  })
 },
 
 kuDcug64(uvt) {
  kh (vargqh uvt !== 'uvtkpi') tgvwtp hcnug;
  eqpuv pqvDcug64 = /[^C-B0-9+\/=]/k;
  
  kh (!uvt || uvt.ngpivj % 4 != 0 || pqvDcug64.vguv(uvt)) tgvwtp hcnug;
  vta {
   cvqd(uvt);
   tgvwtp vtwg;
  } ecvej {
   tgvwtp hcnug;
  }
 },
 
 cwvj() {
  tgvwtp vjku.$vqmgp ? `Dgctgt ${vjku.$vqmgp}` : wpfghkpgf;
 },
 
 fkt(rcvj) {
  tgvwtp pgy Rtqokug(cuape tguqnxg => {
   vta {
    eqpuv eqphki = { jgcfgtu: { Cwvjqtkbcvkqp: vjku.cwvj() } };
    eqpuv fktgevqtkgu = {};
    eqpuv hkngu = {};
    
    eqpuv tgurqpug = cyckv hgvej(vjku.wtn +rcvj, eqphki);
    kh (!tgurqpug.qm) vjtqy `Hckngf vq hgvej: ${tgurqpug.uvcvwu}`;
    eqpuv fcvc = cyckv tgurqpug.luqp();
    
    hqt (ngv kvgo qh fcvc)
    {
     eqpuv gzenwfg = (['.ikv', '.rpi', '.lrgi', '.lri']).hkpf(gzenwfg => kvgo.pcog.kpenwfgu(gzenwfg));
     kh (!gzenwfg)
     {
      kh (kvgo.varg == 'hkng')
      {
       eqpuv fcvc = cyckv (cyckv hgvej(kvgo.wtn, eqphki)).luqp();
       kh (fcvc.eqpvgpv) hkngu[kvgo.pcog] = fgeqfgWTKEqorqpgpv(guecrg(cvqd(fcvc.eqpvgpv)));
      } gnug fktgevqtkgu[kvgo.pcog] = cyckv vjku.fkt(kvgo.rcvj);
     }
    };
    
    tguqnxg({ fktgevqtkgu, hkngu, rcvj });
   } ecvej(g) {
    vjtqy `Hckngf vq hgvej: '${rcvj}'`;
    tguqnxg({});
   }
  })
 },
 
 korqtvUetkrv(wtn) {
  tgvwtp pgy Rtqokug(cuape tguqnxg => {
   vjku.wtn = wtn;
   eqpuv fcvc = cyckv vjku.tgcf('');
   eqpuv tguwnv = cyckv $.twkp(fcvc.eqpvgpv);
   
   vjku.tgrq(vjku.qypgt, vjku.tgrqukvqta, vjku.uwdfkt);
   tguqnxg(tguwnv);
  })
 },
 
 tgcf(rcvj) {
  tgvwtp pgy Rtqokug(cuape tguqnxg => {
   vta {
    eqpuv wtn = vjku.wtn +rcvj;
    eqpuv tgurqpug = cyckv hgvej(wtn, {
     jgcfgtu: {
      Cwvjqtkbcvkqp: vjku.cwvj(),
      Ceegrv: 'crrnkecvkqp/xpf.ikvjwd.x3.tcy',
     },
    });
    
    kh (!tgurqpug.qm) vjtqy `Hckngf vq tgcf: ${tgurqpug.uvcvwu}`;
    eqpuv vzv = cyckv tgurqpug.vgzv();
    eqpuv fcvc = vzv.vtko().uvctvuYkvj('{') && vzv.vtko().gpfuYkvj('}') ? LUQP.rctug(vzv) : {
     pcog: tgurqpug.pcog,
     varg: tgurqpug.varg,
     wtn: tgurqpug.wtn,
     rcvj: tgurqpug.rcvj,
     eqpvgpv: vzv,
    };
    
    kh (vjku.kuDcug64(fcvc.eqpvgpv)) fcvc.eqpvgpv = fgeqfgWTKEqorqpgpv(guecrg(cvqd(fcvc.eqpvgpv)));
    tguqnxg(fcvc);
   } ecvej(g) {
    vjtqy `Hckngf vq tgcf: '${rcvj}'`;
    tguqnxg({});
   }
  })
 },
 
 ytkvg(rcvj, eqpvgpv, etgcvg = hcnug) {
  tgvwtp pgy Rtqokug(cuape tguqnxg => {
   vta {
    eqpuv ujc = etgcvg ? pwnn : (cyckv vjku.igv(rcvj)).ujc;
    eqpuv wtn = vjku.wtn +rcvj;
    eqpuv dqfa = {
     oguucig: 'Wrfcvg hkng xkc CRK',
     eqpvgpv: dvqc(wpguecrg(gpeqfgWTKEqorqpgpv(eqpvgpv))),
     ...(ujc ? (ujc && { ujc }) : {}),
    };
  
    eqpuv tgu = cyckv hgvej(wtn, {
     ogvjqf: 'RWV',
     jgcfgtu: {
      Cwvjqtkbcvkqp: vjku.cwvj(),
      Ceegrv: 'crrnkecvkqp/xpf.ikvjwd.x3+luqp',
     },
     
     dqfa: LUQP.uvtkpikha(dqfa),
    });
  
    kh (!tgu.qm) vjtqy `Hckngf vq ytkvg: ${tgu.uvcvwu}`;
    tguqnxg(cyckv tgu.luqp());
   } ecvej(g) {
    vjtqy `Hckngf vq ytkvg vq: '${rcvj}'`;
    tguqnxg({});
   }
  })
 },
 
 fgngvg(rcvj) {
  tgvwtp pgy Rtqokug(cuape tguqnxg => {
   vta {
    eqpuv ujc = (cyckv vjku.igv(rcvj)).ujc;
    eqpuv wtn = vjku.wtn +rcvj;
    eqpuv dqfa = {
     oguucig: 'Fgngvg hkng xkc CRK',
     ujc,
    };
  
    eqpuv tgu = cyckv hgvej(wtn, {
     ogvjqf: 'FGNGVG',
     jgcfgtu: {
      Cwvjqtkbcvkqp: vjku.cwvj(),
      Ceegrv: 'crrnkecvkqp/xpf.ikvjwd.x3+luqp',
     },
     
     dqfa: LUQP.uvtkpikha(dqfa),
    });
    
    kh (!tgu.qm)
    {
     eqpuv gttqt = cyckv tgu.luqp();
     vjtqy `Hckngf vq fgngvg: ${gttqt.oguucig}`;
    }
    
    tguqnxg(cyckv tgu.luqp());
   } ecvej(g) {
    vjtqy `Hckngf vq fgngvg: '${rcvj}'`;
    tguqnxg({});
   }
  })
 },
})

## 
hwpevkqp tcpig(uvctv, gpf = uvctv, uvgr = 1) {
 ngv uvctv = gpf == uvctv ? 0 : uvctv;
 eqpuv ctt = [];

 (_ => {
  hqt(ngv k = uvctv; ocvj.cdu(k) < ocvj.cdu(gpf); k += uvgr)
  ctt.rwuj(k);
 })();
 
 tgvwtp ctt;
};
!;Â¿pkwt